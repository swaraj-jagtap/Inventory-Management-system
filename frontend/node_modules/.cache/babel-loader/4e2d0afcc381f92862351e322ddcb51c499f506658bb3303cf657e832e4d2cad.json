{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import Sidebar from'./components/Sidebar';import Header from'./components/Header';import Notification from'./components/Notification';import Dashboard from'./pages/Dashboard';import Inventory from'./pages/Inventory';import Billing from'./pages/Billing';import GenericEntityPage from'./pages/GenericEntityPage';import LoginPage from'./pages/LoginPage';// --- THIS IS THE KEY CHANGE ---\n// The API URL is now a relative path, as the backend serves the frontend.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='/api';// -----------------------------\nexport default function App(){const[user,setUser]=useState(null);const[page,setPage]=useState('dashboard');const[products,setProducts]=useState([]);const[customers,setCustomers]=useState([]);const[dashboardStats,setDashboardStats]=useState(null);const[notification,setNotification]=useState({message:'',type:''});const[loading,setLoading]=useState(true);const showNotification=useCallback(function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setNotification({message,type});},[]);const fetchData=useCallback(async()=>{try{setLoading(true);const[productsRes,customersRes,statsRes]=await Promise.all([fetch(`${API_URL}/products`),fetch(`${API_URL}/customers`),fetch(`${API_URL}/dashboard/stats`)]);const productsData=await productsRes.json();const customersData=await customersRes.json();const statsData=await statsRes.json();setProducts(productsData);setCustomers(customersData);setDashboardStats(statsData);}catch(error){console.error(\"Failed to fetch data:\",error);showNotification(\"Could not connect to the server.\",\"error\");}finally{setLoading(false);}},[showNotification]);useEffect(()=>{if(user){fetchData();}},[user,fetchData]);const handleLogin=userData=>{setUser(userData);};const handleLogout=()=>{setUser(null);setPage('dashboard');};if(!user){return/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex h-screen bg-gray-900 text-white items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading Data...\"})});}const renderPage=()=>{switch(page){case'dashboard':return/*#__PURE__*/_jsx(Dashboard,{products:products,stats:dashboardStats});case'inventory':return/*#__PURE__*/_jsx(Inventory,{products:products,API_URL:API_URL,showNotification:showNotification,refreshData:fetchData});case'billing':return/*#__PURE__*/_jsx(Billing,{products:products,customers:customers,API_URL:API_URL,showNotification:showNotification,refreshData:fetchData});case'customers':return/*#__PURE__*/_jsx(GenericEntityPage,{title:\"Customers\",items:customers,API_URL:`${API_URL}/customers`,refreshData:fetchData,entityName:\"Customer\",formFields:[{name:'name',type:'text',placeholder:'Customer Name'},{name:'email',type:'email',placeholder:'Email Address'},{name:'phone',type:'tel',placeholder:'Phone Number'}]});default:return/*#__PURE__*/_jsx(Dashboard,{products:products,stats:dashboardStats});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen bg-gray-900 text-white font-sans\",children:[/*#__PURE__*/_jsx(Notification,{message:notification.message,type:notification.type,onClose:()=>setNotification({message:'',type:''})}),/*#__PURE__*/_jsx(Sidebar,{user:user,onNavigate:setPage,activePage:page}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col overflow-hidden\",children:[/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1 overflow-x-hidden overflow-y-auto bg-gray-900\",children:renderPage()})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","Sidebar","Header","Notification","Dashboard","Inventory","Billing","GenericEntityPage","LoginPage","jsx","_jsx","jsxs","_jsxs","API_URL","App","user","setUser","page","setPage","products","setProducts","customers","setCustomers","dashboardStats","setDashboardStats","notification","setNotification","message","type","loading","setLoading","showNotification","arguments","length","undefined","fetchData","productsRes","customersRes","statsRes","Promise","all","fetch","productsData","json","customersData","statsData","error","console","handleLogin","userData","handleLogout","onLogin","className","children","renderPage","stats","refreshData","title","items","entityName","formFields","name","placeholder","onClose","onNavigate","activePage","onLogout"],"sources":["C:/Users/santo/OneDrive/Desktop/inventory-app/vrindavan-desktop-app/Frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport Sidebar from './components/Sidebar';\r\nimport Header from './components/Header';\r\nimport Notification from './components/Notification';\r\nimport Dashboard from './pages/Dashboard';\r\nimport Inventory from './pages/Inventory';\r\nimport Billing from './pages/Billing';\r\nimport GenericEntityPage from './pages/GenericEntityPage';\r\nimport LoginPage from './pages/LoginPage';\r\n\r\n// --- THIS IS THE KEY CHANGE ---\r\n// The API URL is now a relative path, as the backend serves the frontend.\r\nconst API_URL = '/api';\r\n// -----------------------------\r\n\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [page, setPage] = useState('dashboard');\r\n    const [products, setProducts] = useState([]);\r\n    const [customers, setCustomers] = useState([]);\r\n    const [dashboardStats, setDashboardStats] = useState(null);\r\n    const [notification, setNotification] = useState({ message: '', type: '' });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const showNotification = useCallback((message, type = 'info') => {\r\n        setNotification({ message, type });\r\n    }, []);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const [productsRes, customersRes, statsRes] = await Promise.all([\r\n                fetch(`${API_URL}/products`),\r\n                fetch(`${API_URL}/customers`),\r\n                fetch(`${API_URL}/dashboard/stats`),\r\n            ]);\r\n            const productsData = await productsRes.json();\r\n            const customersData = await customersRes.json();\r\n            const statsData = await statsRes.json();\r\n\r\n            setProducts(productsData);\r\n            setCustomers(customersData);\r\n            setDashboardStats(statsData);\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch data:\", error);\r\n            showNotification(\"Could not connect to the server.\", \"error\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [showNotification]);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchData();\r\n        }\r\n    }, [user, fetchData]);\r\n\r\n    const handleLogin = (userData) => {\r\n        setUser(userData);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        setUser(null);\r\n        setPage('dashboard');\r\n    };\r\n\r\n    if (!user) {\r\n        return <LoginPage onLogin={handleLogin} />;\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex h-screen bg-gray-900 text-white items-center justify-center\">\r\n                <p>Loading Data...</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const renderPage = () => {\r\n        switch (page) {\r\n            case 'dashboard':\r\n                return <Dashboard products={products} stats={dashboardStats} />; \r\n            case 'inventory':\r\n                return <Inventory products={products} API_URL={API_URL} showNotification={showNotification} refreshData={fetchData} />;\r\n            case 'billing':\r\n                return <Billing products={products} customers={customers} API_URL={API_URL} showNotification={showNotification} refreshData={fetchData} />;\r\n            case 'customers':\r\n                return <GenericEntityPage \r\n                    title=\"Customers\"\r\n                    items={customers}\r\n                    API_URL={`${API_URL}/customers`}\r\n                    refreshData={fetchData}\r\n                    entityName=\"Customer\"\r\n                    formFields={[\r\n                        { name: 'name', type: 'text', placeholder: 'Customer Name' },\r\n                        { name: 'email', type: 'email', placeholder: 'Email Address' },\r\n                        { name: 'phone', type: 'tel', placeholder: 'Phone Number' },\r\n                    ]}\r\n                />;\r\n            default:\r\n                return <Dashboard products={products} stats={dashboardStats} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-gray-900 text-white font-sans\">\r\n            <Notification message={notification.message} type={notification.type} onClose={() => setNotification({ message: '', type: '' })} />\r\n            <Sidebar user={user} onNavigate={setPage} activePage={page} />\r\n            <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n                <Header user={user} onLogout={handleLogout} />\r\n                <main className=\"flex-1 overflow-x-hidden overflow-y-auto bg-gray-900\">\r\n                    {renderPage()}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}